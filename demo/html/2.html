<script>
    /***
     ** Created by Kamui on 2017/7/18.
     *  内容显示，隐藏，滚动
     */
    window.onload = function () {
        var module_showTable = (function () {
            var _getTableList = document.getElementById("text-cont");
            var _getBtn = document.getElementById("tableBtn");

            var onload = function (height) {
                //console.log(height);
                if(height < 132){
                    _getBtn.style.display = "none";
                    _getTableList.style.overflowY ="visible";
                    _getTableList.style.height = "auto";
                }else {
                    _getBtn.style.display = "block";
                    _getTableList.style.height = "132px";
                    _getTableList.style.overflowY ="scroll";
                }
            };
            var changeHeight = function () {
                if(_getTableList.style.height==="auto"){
                    _getTableList.style.height ="132px";
                    _getTableList.style.overflowY ="scroll";
                    _getBtn.innerHTML = "点击展开";
                    //_getBtn.style.backgroundImage ="url(../images/table_btn.png)";
                }else {
                    _getTableList.style.height="auto";
                    _getTableList.style.overflowY ="visible";
                    _getBtn.innerHTML = "点击收起";
                    //_getBtn.style.backgroundImage ="url(../images/table_btn_.png)";
                }
            };
            var addlistener = function () {
                //console.log( _getBtn);
                _getBtn.onclick= function () {
                    changeHeight();
                };
            };
            return{
                onload:onload,
                addlistener:addlistener,
                changeHeight:changeHeight
            };
        })();

        function insert() {
            var insert_btn = document.getElementById("insert");
            var textarea = document.getElementById("text");
            var text_cont = document.getElementById("text-cont");
            var text_wrap = document.getElementById("text-wrap");
                insert_btn.onclick= function () {
                    if(insert_btn.innerHTML === "插入文字并显示") {
                        text_cont.innerHTML = text.value;
                        text_wrap.style.display = "block";
                        insert_btn.innerHTML = "清空文字重新输入";
                        var height = document.getElementById("text-cont").offsetHeight;
                        var showTable = module_showTable;
                        showTable.onload(height);
                        showTable.addlistener();
                    }else {
                        insert_btn.innerHTML = "插入文字并显示";
                        textarea.value = "";
                        text_wrap.style.display = "none";
                        text_cont.innerHTML = "";
                        document.getElementById("text-cont").style.height="auto"
                    }


                };
        }

        insert();
    }
</script>

<div class="list-title"><textarea style="display:block;width:220px;margin-right: 5px;" id="text" name="i" ></textarea><button style="margin-right:5px;" class="btn" id="insert">插入文字并显示</button></div>
<div id="text-wrap" style="display: none;width: 200px;height: auto;">
    <a id="tableBtn" href="javascript:void(0);" class="btn">展开</a>
    <p id="text-cont" style="border:1px solid #cccccc;overflow-y: scroll; word-break:break-all;height: auto;padding: 5px;">这里是填充文字</p>
</div>